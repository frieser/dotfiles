# Window status style (square)
set -g @catppuccin_window_status_style "basic"

# Transparent status bar
set -g @catppuccin_status_background "none"
set -g status-style bg=default

# Use Window Name (#W) instead of Pane Title (#T)
set -g @catppuccin_window_text " #W"
set -g @catppuccin_window_current_text " #W"

# Status line separators (square)
set -g @catppuccin_status_left_separator "█"
set -g @catppuccin_status_right_separator "█"
set -g @catppuccin_status_connect_separator "no"

# Status module background (make it visible against status bar)
set -g @catppuccin_status_module_bg_color "#{@thm_surface_1}"

# Ensure high contrast for status module text
set -g @catppuccin_status_session_text_fg "#{E:@thm_fg}"
set -g @catppuccin_status_application_text_fg "#{E:@thm_fg}"
set -g @catppuccin_status_directory_text_fg "#{E:@thm_fg}"
set -g @catppuccin_status_battery_text_fg "#{E:@thm_fg}"
set -g @catppuccin_status_uptime_text_fg "#{E:@thm_fg}"
set -g @catppuccin_status_date_time_text_fg "#{E:@thm_fg}"

# Configure Status modules
set -g status-left-length 100
set -g status-right-length 100

# Left side: Session only
set -g status-left " #{E:@catppuccin_status_session}"

# Right side: The rest
set -g status-right "#{E:@catppuccin_status_directory}"
set -ag status-right " "
set -agF status-right "#{E:@catppuccin_status_cpu}"
set -ag status-right " "
set -ag status-right "#{E:@catppuccin_status_uptime}"
set -ag status-right " "
set -agF status-right "#{E:@catppuccin_status_battery}"
set -ag status-right " "

# Force reload of catppuccin to apply settings
run ~/.config/tmux/plugins/tmux/catppuccin.tmux

# Add margin below status bar
set -g status 2
set -g status-format[1] ""

# Sync GTK theme based on text brightness
run-shell ~/.config/tmux/scripts/sync_gtk_theme.sh
